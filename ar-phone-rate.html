<!doctype html>
<html lang="ar">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ADHA's Survey</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  </head>
  <body style="margin: 20px;">
    <div class="text-center row" style="margin-top: 10px;">
        <h1 class="display-2">قيم تجربتك</h1>
        <form method="post" name ="google-sheet">
          <input class="form-check-input float-end checkbox" type="checkbox" id="checkbox16" name="checkbox16" value="smile" style="display: none;">
          <input class="form-check-input float-end checkbox" type="checkbox" id="checkbox15" name="checkbox15" value="neutral" style="display: none;">
          <input class="form-check-input float-end checkbox" type="checkbox" id="checkbox14" name="checkbox14" value="frown" style="display: none;">

            <div class="row align-items-start">
              <div class="col-12 col-md-4">
                <button class="button-submit" style="background: none; border: none" name="frown" value="frown">
                    <i class="bi bi-emoji-frown text-danger" style="font-size: 125px; cursor: pointer"></i>
                </button>
              </div>
              <div class="col-12 col-md-4">
                <button class="button-submit" style="background: none; border: none"  name="neutral" value="neutral">
                    <i class="bi bi-emoji-neutral text-warning" style="font-size: 125px; cursor: pointer"></i>
                </button>
              </div>
              <div class="col-12 col-md-4">
                <button class="button-submit" style="background: none; border: none" name="smile" value="smile">
                    <i class="bi bi-emoji-smile text-success" style="font-size: 125px; cursor: pointer"></i>
                </button>
              </div>
            </div>
        </form>
      </div>
      <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzscXwnl6FjVTNADtIHuwp5AYckWLtsyntSdZHTKhF4CbHmeSOWKJR3bH8OlYVhnpaoCA/exec'
        const form2 = document.forms['google-sheet']
      
        form2.addEventListener('submit', e => {
          e.preventDefault()
          fetch(scriptURL, { method: 'POST', body: new FormData(form2) })
            .then(response => {
              form2.reset()
              window.location.href = "success.html";
              console.log('sent successfully')
            })
            .catch(error => console.error('Error!', error.message))
        });
      
        const checkboxes = document.querySelectorAll('.checkbox');
      
        const btnSubmit = document.querySelectorAll('.button-submit')
        btnSubmit.forEach(btn => {
          btn.addEventListener('click', function() {
            checkboxes.forEach(checkbox => {
              if (btn.value === checkbox.value) {
                checkbox.checked = true;
                console.log(`${checkbox.value} is selected`);
              }
            });
          });
        });
      </script>
      
  </body>
</html>